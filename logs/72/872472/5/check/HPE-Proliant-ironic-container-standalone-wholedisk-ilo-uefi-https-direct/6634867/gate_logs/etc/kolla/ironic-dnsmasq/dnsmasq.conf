# NOTE(yoctozepto): ironic-dnsmasq is used to deliver DHCP(v6) service
# DNS service is disabled:
port=0

interface=eth0
bind-interfaces

dhcp-range=set:range_1,169.16.1.230,169.16.1.250,10m

dhcp-option=option:tftp-server,169.16.1.177
dhcp-option=option:server-ip-address,169.16.1.177
dhcp-option=210,/var/lib/ironic/tftpboot/
dhcp-match=ipxe,175
dhcp-match=set:efi,option:client-arch,7
dhcp-match=set:efi,option:client-arch,9
# Client is already running iPXE; move to next stage of chainloading
dhcp-option=tag:ipxe,option:bootfile-name,http://169.16.1.177:8089/inspector.ipxe
# Client is PXE booting over EFI without iPXE ROM,
# send EFI version of iPXE chainloader
dhcp-option=tag:efi,tag:!ipxe,option:bootfile-name,snponly.efi
dhcp-option=option:bootfile-name,undionly.kpxe

log-async
log-facility=/var/log/kolla/ironic/dnsmasq.log

